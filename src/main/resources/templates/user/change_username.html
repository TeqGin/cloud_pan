<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
    <script src="https://www.runoob.com/static/js/wonderland.js"></script>
    <link rel="stylesheet" href="/css/personal.css">
    <style>
        body{
            padding-top: 50px;
        }
        .starter{
            padding: 40px 15px;
            text-align: center;
        }
        .head{
            background-image: url(http://api.ltttttt.com/Bing/Index);
            background-size:100% ;
            width: 100%;
            height: 600px;
        }
    </style>
    <title>个人网盘</title>
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation" style="height: 50px">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand">TeqGin</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="/user/index" >Home</a></li>
                <li><a href="/info/about" >About</a></li>
                <li><a href="http://localhost:8000">My Blog</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <svg style="width: 45px; height: 45px;" t="1602168695485" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2518" width="200" height="200"><path d="M915.268098 425.487551c0-215.751322-174.908627-390.659949-390.659949-390.659949s-390.659949 174.908627-390.65995 390.659949c0 167.759015 105.756465 310.761962 254.217949 366.117943-45.263039 38.605765-74.043439 95.952505-74.04344 160.106361a37.460543 37.460543 0 1 0 74.921087 0c0-74.749838 60.814516-135.564354 135.564354-135.564354s135.564354 60.814516 135.564353 135.564354a37.460543 37.460543 0 1 0 74.921087 0c0-64.153856-28.7804-121.500596-74.04344-160.106361 148.461484-55.35598 254.217948-198.358927 254.217949-366.117943z m-390.659949 315.738864c-174.105901 0-315.738863-141.632962-315.738864-315.738864 0-174.095198 141.632962-315.738863 315.738864-315.738863s315.738863 141.643665 315.738863 315.738863c0 174.105901-141.632962 315.738863-315.738863 315.738864z" fill="#3E3A39" p-id="2519"></path><path d="M637.642662 508.104104c-15.198277 0-28.202437 9.086857-34.078392 22.069611 0.042812-0.139139 0.064218-0.310387 0.10703-0.438824-15.423041 27.485336-45.701863 47.499969-79.394945 47.499969a90.151473 90.151473 0 0 1-78.870498-46.633025c0.171248 0.406714 0.224763 0.866944 0.396012 1.273659a37.460543 37.460543 0 0 0-34.217531-22.326484 37.460543 37.460543 0 0 0-37.460543 37.460543c0 7.941635 2.504505 15.294605 6.732195 21.35251 28.341577 49.972364 81.856638 83.793883 143.420365 83.793883 62.24872 0 116.224011-34.613542 144.319418-85.527771a37.460543 37.460543 0 0 0-30.953111-58.524071z" fill="#3E3A39" p-id="2520"></path></svg>
                </li>
                <li><a href="/user/sign_out">sign out</a></li>
                <li><a th:text="${user.name}" href="/user/personal" /></li>
            </ul>
        </div>
    </div>
</nav>
<div class="row frame">
    <div class="left_frame col-xs-2">
        <div class="left_top">
            <p th:text="'Hi,' + ${user.name}" id="user_name"></p>
            <button class="btn btn-default" id="main">个人中心</button>
        </div>
        <div class="lab" id="data_analyze" >
            <span>数据分析</span>
            <span class="hint">查看></span>
        </div>
        <div class="lab" id="change_password">
            <span>登陆密码</span>
            <span class="hint">设置></span>
        </div>
        <div class="lab" id="change_name" style="background-color: #f7f7f7">
            <span>修改用户名</span>
            <span class="hint">设置></span>
        </div>
        <div class="lab" id="change_account">
            <span>邮箱换绑</span>
            <span class="hint">设置></span>
        </div>
    </div>
    <div class="right_frame col-xs-10">
        <div class="white_bg">
            <div class="cont">
                <table class="mytable">
                    <tr>
                        <td><h2 id="change_title">修改用户名</h2></td>
                    </tr>
                    <tr>
                        <td><p id="title_input">请输入新用户名：</p></td>
                    </tr>
                    <tr><td><input type="text" id="new_password" placeholder="用户名不能为空"></td>
                    </tr>
                    <tr>
                        <td><button class="btn btn-default" id="submit" >提交</button></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

</body>
<script src="/js/personal.js"></script>
<script>
    $("#submit").click(function () {
        var name = document.getElementById("new_password").value
        if (name === ""){
            alert("用户名不能为空")
        }else {
            $.ajax({
                type:'POST',
                url:'/user/username_changed',
                data:{
                    name:name
                },
                success:function (data) {
                    alert("修改成功!")
                    location.href = "/user/change_name"
                },
                error:function (data) {
                    alert("修改失败!")
                }
            })
        }
    })
</script>
</html>